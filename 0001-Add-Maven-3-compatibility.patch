From 9d3ab581009e3ab7a08e61f86f270134194bded5 Mon Sep 17 00:00:00 2001
From: Stanislav Ochotnicky <sochotnicky@redhat.com>
Date: Wed, 14 Sep 2011 15:48:30 +0200
Subject: [PATCH 1/3] Add Maven 3 compatibility

---
 archetype-common/pom.xml                                          | 8 ++++++++
 maven-archetype-plugin/pom.xml                                    | 4 ++++
 .../org/apache/maven/archetype/mojos/IntegrationTestMojo.java     | 2 +-
 3 files changed, 13 insertions(+), 1 deletion(-)

diff --git a/archetype-common/pom.xml b/archetype-common/pom.xml
index 9197880..f1ac876 100644
--- a/archetype-common/pom.xml
+++ b/archetype-common/pom.xml
@@ -73,6 +73,14 @@
     </dependency>
     <dependency>
       <groupId>org.apache.maven</groupId>
+      <artifactId>maven-compat</artifactId>
+    </dependency>
+    <dependency>
+      <groupId>org.apache.maven</groupId>
+      <artifactId>maven-core</artifactId>
+    </dependency>
+    <dependency>
+      <groupId>org.apache.maven</groupId>
       <artifactId>maven-model</artifactId>
     </dependency>
     <dependency>
diff --git a/maven-archetype-plugin/pom.xml b/maven-archetype-plugin/pom.xml
index 9bb19c9..2713361 100644
--- a/maven-archetype-plugin/pom.xml
+++ b/maven-archetype-plugin/pom.xml
@@ -83,6 +83,10 @@
     </dependency>
     <dependency>
       <groupId>org.codehaus.plexus</groupId>
+      <artifactId>plexus-interactivity-api</artifactId>
+    </dependency>
+    <dependency>
+      <groupId>org.codehaus.plexus</groupId>
       <artifactId>plexus-utils</artifactId>
     </dependency>
     <dependency>
diff --git a/maven-archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/IntegrationTestMojo.java b/maven-archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/IntegrationTestMojo.java
index 66966d4..0b48590 100644
--- a/maven-archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/IntegrationTestMojo.java
+++ b/maven-archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/IntegrationTestMojo.java
@@ -673,7 +673,7 @@ public class IntegrationTestMojo
                 // interpolation with token @...@
                 Map<String, Object> composite = getInterpolationValueSource();
                 reader = ReaderFactory.newXmlReader( originalFile );
-                reader = new InterpolationFilterReader( reader, composite, "@", "@" );
+                reader = new InterpolationFilterReader( reader, ( Map ) composite, "@", "@" );
                 xml = IOUtil.toString( reader );
             }
             finally
-- 
2.5.5

